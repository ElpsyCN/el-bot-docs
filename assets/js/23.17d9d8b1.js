(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{409:function(t,s,a){"use strict";a.r(s);var n=a(28),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"使用说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用说明"}},[t._v("#")]),t._v(" 使用说明")]),t._v(" "),a("p",[t._v("el-bot 使用了 "),a("a",{attrs:{href:"https://github.com/YunYouJun/mirai-ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("mirai-ts"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("因此你在编写插件时，可以通过 "),a("code",[t._v("ctx.mirai.api")]),t._v(" 的方式直接使用 mirai-ts 的 API 进行编写，同时不需要处理登录、加载插件等问题。")]),t._v(" "),a("p",[t._v("mirai-ts 也提供了许多字符匹配、彩色日志等辅助小工具。")]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://github.com/project-mirai/mirai-api-http/blob/master/EventType.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mirai-api-http 事件类型一览"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://github.com/project-mirai/mirai-api-http/blob/master/MessageType.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mirai-api-http 消息类型一览"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("具体例子见下方。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("如果你觉得某个功能非常有用受众很广，可以考虑直接为 "),a("a",{attrs:{href:"https://github.com/ElpsyCN/el-bot",target:"_blank",rel:"noopener noreferrer"}},[t._v("el-bot"),a("OutboundLink")],1),t._v(" 提 PR。")]),t._v(" "),a("p",[t._v("我们也建立了一个仓库 "),a("a",{attrs:{href:"https://github.com/ElpsyCN/el-bot-plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("el-bot-plugins"),a("OutboundLink")],1),t._v(" 专门收集有趣的插件（对部分群体有用但不是必须的）。")])]),t._v(" "),a("p",[t._v("插件主要分这几种类型：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("default")]),t._v(": 内置插件 "),a("code",[t._v("../plugins/rss")])]),t._v(" "),a("li",[a("code",[t._v("official")]),t._v(": 官方插件 "),a("code",[t._v("@el-bot/plugin-niubi")])]),t._v(" "),a("li",[a("code",[t._v("community")]),t._v(": 社区插件 "),a("code",[t._v("el-bot-plugin-xxx")]),t._v("（如果您放在个人仓库中并自行发布为 npm 包，请遵循该命名规范）")]),t._v(" "),a("li",[a("code",[t._v("custom")]),t._v(": 自定义插件 "),a("code",[t._v("./xxx/xxx")])])]),t._v(" "),a("h2",{attrs:{id:"插件列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件列表"}},[t._v("#")]),t._v(" 插件列表")]),t._v(" "),a("chat-panel",{attrs:{title:"聊天记录"}},[a("chat-message",{attrs:{id:910426929,nickname:"云游君"}},[t._v("el plugins")]),t._v(" "),a("chat-message",{attrs:{id:712727945,nickname:"小云"}},[t._v("默认插件:"),a("br"),t._v("- answer@0.1.0: 自动应答"),a("br"),t._v("- blacklist@0.0.1: 黑名单"),a("br"),t._v("- forward@0.0.2: 消息转发"),a("br"),t._v("- limit@0.1.0: 限制消息频率"),a("br"),t._v("- memo@0.0.1: 备忘录"),a("br"),t._v("- nbnhhsh@0.0.2: 能不能好好说话？"),a("br"),t._v("- qrcode@0.0.2: 二维码生成器"),a("br"),t._v("- rss@0.0.2: 订阅 RSS 信息"),a("br"),t._v("- report@0.0.1: 消息报告"),a("br"),t._v("- search@0.0.5: 引擎搜索"),a("br"),t._v("- search-image@0.1.0: 以图搜图"),a("br"),t._v("- teach@0.1.0: 问答学习（教小云做事）"),a("br"),t._v("- workflow@0.0.1: 工作流 "),a("br"),t._v("官方插件:"),a("br"),t._v("- niubi@0.1.2: 夸人牛逼"),a("br"),t._v("- setu@0.0.12: 发点色图 "),a("br"),t._v("无社区插件"),a("br"),t._v("自定义插件:"),a("br"),t._v("- ./bot/plugins/test@未知: 未知"),a("br"),t._v("- ./bot/plugins/cbd@0.0.1: 老师来了吗？\n  ")])],1),t._v(" "),a("h2",{attrs:{id:"如何编写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何编写"}},[t._v("#")]),t._v(" 如何编写")]),t._v(" "),a("p",[t._v("我将示范如何新建一个名为 "),a("code",[t._v("test")]),t._v(" 的自定义插件。")]),t._v(" "),a("blockquote",[a("p",[t._v("你也可以使用 typescript 编写你的插件。")])]),t._v(" "),a("p",[t._v("新建 "),a("code",[t._v("plugins/custom")]),t._v(" 文件夹（其实你也可以随便放，路径写对就行），新建 "),a("code",[t._v("test.js")]),t._v(" 文件。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("你的文件名将是你的插件名。")])])]),t._v(" "),a("p",[t._v("或者新建 "),a("code",[t._v("/plugins/custom/test")]),t._v(" 文件夹，新建 "),a("code",[t._v("index.js")]),t._v(" 文件。（推荐，方便管理单个含有较多内容的插件）")]),t._v(" "),a("p",[t._v("默认传入机器人上下文 ctx。")]),t._v(" "),a("ul",[a("li",[t._v("ctx 是机器人的实例本身")]),t._v(" "),a("li",[t._v("通过 "),a("code",[t._v("ctx.el.config")]),t._v(" 获取机器人相关的配置（即你写在配置文件中的配置）")]),t._v(" "),a("li",[t._v("通过 "),a("code",[t._v("ctx.mirai")]),t._v(" 获取 mirai 实例（即 mirai-ts 的实例）")])]),t._v(" "),a("p",[t._v("插件默认导出一个函数，你无需操心它的加载问题，只需后续在配置文件中写上该插件的名字，将会自动加载。")]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/learn/JavaScript/%E5%BC%82%E6%AD%A5/Async_await",target:"_blank",rel:"noopener noreferrer"}},[t._v("async 和 await:让异步编程更简单"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("test.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 JSDoc 可以获取 el-bot 及 mirai-ts 的代码提示")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bot "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"el-bot"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 这里因为后续用到了异步编程关键字 await，如果你用不着，此处无需添加 async 关键字。\n * 而应该使用\n * module.exports = function(ctx) {\n * @param {Bot} ctx\n */")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mirai "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mirai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对收到的消息进行处理")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// message 本质相当于同时绑定了 FriendMessage GroupMessage TempMessage")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 你也可以单独对某一类消息进行监听")]),t._v("\n  mirai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用 mirai-ts 封装的 mirai-api-http 发送指令")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"send command help"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" mirai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"help"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"帮助信息:"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理各种事件类型")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 事件订阅说明（名称均与 mirai-api-http 中时间名一致）")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://github.com/RedBeanN/node-mirai/blob/master/event.md")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on other event"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://github.com/project-mirai/mirai-api-http/blob/master/EventType.md#群消息撤回")]),t._v("\n  mirai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GroupRecallEvent"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" operator "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("operator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memberName"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(" 撤回了一条消息，并拜托你不要再发色图了。")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    mirai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendGroupMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" operator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("test.ts")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mirai "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mirai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  mirai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"辅助函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#辅助函数"}},[t._v("#")]),t._v(" 辅助函数")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("isListening(sender, listen)")]),t._v(": 传入 "),a("a",{attrs:{href:"https://docs.bot.elpsy.cn/config.html#%E7%9B%91%E5%90%AC%E4%B8%8E%E7%9B%AE%E6%A0%87",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置讲解"),a("OutboundLink")],1),t._v(" 处 "),a("code",[t._v("listen")]),t._v(" 的格式，可以快速判断是否在监听。")]),t._v(" "),a("li",[a("code",[t._v("sendMessageByConfig(messageChain, target)")]),t._v(": 传入 配置讲解处 "),a("code",[t._v("target")]),t._v(" 的格式，可以快速发送给多个指定对象。")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" canForward "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isListening")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("listen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("canForward"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMessageByConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messageChain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"插件信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件信息"}},[t._v("#")]),t._v(" 插件信息")]),t._v(" "),a("blockquote",[a("p",[t._v("标准的插件格式请参照 "),a("a",{attrs:{href:"https://github.com/ElpsyCN/el-bot-plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("el-bot-plugins"),a("OutboundLink")],1),t._v(" 说明。（如果你只是自行使用，大可无视。）")])]),t._v(" "),a("p",[t._v("如果你想将插件提交到 "),a("a",{attrs:{href:"https://github.com/ElpsyCN/el-bot-plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方插件"),a("OutboundLink")],1),t._v(" 中，"),a("code",[t._v("package.json")]),t._v(" 与 "),a("code",[t._v("README.md")]),t._v(" 是必不可少的。\n这更方便别人知道如何使用它。")]),t._v(" "),a("h4",{attrs:{id:"package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[t._v("#")]),t._v(" package.json")]),t._v(" "),a("p",[a("code",[t._v("el-bot.db")]),t._v(" 设置为 "),a("code",[t._v("true")]),t._v("，代表需要依赖数据库。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blacklist"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"黑名单"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"el-bot"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"db"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"author"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"YunYouJun"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.yunyoujun.cn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"email"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"me@yunyoujun.cn"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"加载插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载插件"}},[t._v("#")]),t._v(" 加载插件")]),t._v(" "),a("h3",{attrs:{id:"通过配置加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过配置加载"}},[t._v("#")]),t._v(" 通过配置加载")]),t._v(" "),a("p",[t._v("编写完，你还需要在你的自定义配置文件 "),a("code",[t._v("el/index.yml")]),t._v(" 中加载它。")]),t._v(" "),a("blockquote",[a("p",[t._v("记得重启。")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default:")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - answer")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - cli")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - forward")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   - rss")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("custom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" test\n")])])]),a("p",[t._v("mirai-ts 实现了一个事件队列，对应的监听事件将会推入对应事件的列表，并在收到对应类型的消息时执行。")]),t._v(" "),a("p",[t._v("自定义插件将会在默认插件之后进入事件队列，")]),t._v(" "),a("p",[t._v("任何插件的加载顺序取决于你的配置顺序。")]),t._v(" "),a("h3",{attrs:{id:"自行加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自行加载"}},[t._v("#")]),t._v(" 自行加载")]),t._v(" "),a("p",[t._v("你也可以在你的代码中自行加载它，此时它将不会出现在插件列表中。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Bot "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"el-bot"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bot "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("yourPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// yourPlugin 应当是一个默认导出的函数或带有 "install" 属性的对象')]),t._v("\n")])])]),a("p",[t._v("如果你希望它出现在插件列表中，你可以使用 "),a("code",[t._v("bot.plugin(name: string, plugin: Plugin, ...options: any[])")]),t._v(" 来注册它。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("bot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"奇怪的插件"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"默认插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认插件"}},[t._v("#")]),t._v(" 默认插件")]),t._v(" "),a("p",[t._v("即随 el-bot 默认加载的插件列表。")]),t._v(" "),a("p",[t._v("你可以覆盖 "),a("code",[t._v("plugins.default")]),t._v(" 来只加载你想加载的默认插件。")]),t._v(" "),a("h3",{attrs:{id:"官方插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#官方插件"}},[t._v("#")]),t._v(" 官方插件")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/ElpsyCN/el-bot-plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("el-bot-plugins"),a("OutboundLink")],1),t._v(" 是 el-bot 的官方插件集中地，它提供了许多有趣的插件。")]),t._v(" "),a("p",[t._v("该部分插件将由我们进行审核，并统一发布至 npm 中 "),a("code",[t._v("@el-bot")]),t._v(" 的命名空间下。（如："),a("code",[t._v("@el-bot/plugin-niubi")]),t._v("）")]),t._v(" "),a("p",[t._v("插件的使用方式，见各插件的 "),a("code",[t._v("README.md")]),t._v("。")]),t._v(" "),a("p",[t._v("同时也欢迎你为其提交插件，来给更多人使用。")]),t._v(" "),a("p",[t._v("譬如加载 "),a("code",[t._v("niubi")]),t._v(" 插件：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @el-bot/plugin-niubi\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yarn add @el-bot/plugin-niubi")]),t._v("\n")])])]),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("official")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" niubi\n")])])]),a("h3",{attrs:{id:"社区插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#社区插件"}},[t._v("#")]),t._v(" 社区插件")]),t._v(" "),a("p",[t._v("社区插件即您自行编写并发布的插件。")]),t._v(" "),a("p",[t._v("如果您希望被更多人检索到，请遵循 "),a("code",[t._v("el-bot-plugin-xxx")]),t._v(" 的命名规范。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" el-bot-plugin-xxx\n")])])]),a("h3",{attrs:{id:"自定义插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义插件"}},[t._v("#")]),t._v(" 自定义插件")]),t._v(" "),a("p",[t._v("自定义插件即您自行编写，且暂不打算发布的插件。")]),t._v(" "),a("p",[t._v("引入方式是您相对主目录的相对路径。")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("custom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./xxx/yyy\n")])])])],1)}),[],!1,null,null,null);s.default=e.exports}}]);